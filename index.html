<!DOCTYPE html><html><head><meta http-equiv="Content-Type"content="text/html; charset=utf-8"/><title>table</title><!--Babylon.js--><script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script><script src="https://cdn.babylonjs.com/babylon.js"></script><script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script><script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script><style>html,body{overflow:hidden;width:100%;height:100%;margin:0;padding:0;}#renderCanvas{width:100%;height:100%;touch-action:none;}#canvasZone{width:100%;height:100%;}</style></head><body><canvas id="renderCanvas"></canvas><script>var canvas=document.getElementById("renderCanvas");var startRenderLoop=function(engine,canvas){engine.runRenderLoop(function(){if(sceneToRender&&sceneToRender.activeCamera){sceneToRender.render();}});}
var engine=null;var scene=null;var sceneToRender=null;var createDefaultEngine=function(){return new BABYLON.Engine(canvas,true,{preserveDrawingBuffer:true,stencil:true,disableWebGL2Support:false});};var createScene=async function(){var scene=new BABYLON.Scene(engine);scene.clearColor=new BABYLON.Color3(0,0,0);const camera=new BABYLON.ArcRotateCamera("camera",-Math.PI/1.0,Math.PI/2.5,30,new BABYLON.Vector3(0,5,0));camera.attachControl(canvas,true);camera.upperBetaLimit=2;camera.upperRadiusLimit=30;camera.upperBetaLimit=Math.PI/2.4;const light=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(-1,1,-1));const light1=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(1,1,1));light.intensity=0.6;light1.intensity=0.6;var sotok=50;const skybox=BABYLON.MeshBuilder.CreateBox("skyBox",{size:sotok*4},scene);const skyboxMaterial=new BABYLON.StandardMaterial("skyBox",scene);skyboxMaterial.backFaceCulling=false;skyboxMaterial.reflectionTexture=new BABYLON.CubeTexture("textures/skybox/TropicalSunnyDay",scene);skyboxMaterial.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE;skyboxMaterial.diffuseColor=new BABYLON.Color3(0,0,0);skyboxMaterial.specularColor=new BABYLON.Color3(0,0,0);skybox.material=skyboxMaterial;var ground=BABYLON.Mesh.CreateGround("ground_S",1.5*sotok,1.5*sotok,1500,scene,false);ground.position=new BABYLON.Vector3(0,-0.7,0);var furMaterial=new BABYLON.FurMaterial("fur_S",scene);furMaterial.highLevelFur=false;furMaterial.furLength=0.6;furMaterial.furAngle=Math.PI/6;furMaterial.furColor=new BABYLON.Color3(0.09,0.8,0.87);ground.material=furMaterial;var shirtMaterial=new BABYLON.StandardMaterial("shirtMat",scene);shirtMaterial.diffuseColor=new BABYLON.Color3(0,0,0);var matinviz=new BABYLON.StandardMaterial("matinviz",scene);matinviz.diffuseTexture=new BABYLON.Texture("textures/invisible.png",scene);matinviz.diffuseTexture.hasAlpha=true;matinviz.transparencyMode=BABYLON.Material.MATERIAL_ALPHATESTANDBLEND;matinviz.useAlphaFromDiffuseTexture=true;let harar="Harar_low";let keln="ReadyForUV1_Keln_low_group5_pCylinder3";let lion="ReadyForUV1_Lion_low_pCylinder9";tablesName=["Harar","Keln","Lion"];table=[];tablesName.forEach(function(item,index){table[index]=BABYLON.SceneLoader.ImportMeshAsync("","models/",`${item}.glb`,scene).then((result)=>{result.meshes[0].scaling=new BABYLON.Vector3(10,10,10);result.meshes[0].getDescendants().forEach((mesh)=>{if(index==0){mesh.material=shirtMaterial;}else if(index==1){mesh.material=matinviz;}else if(index==2){mesh.material=matinviz;}})});});const wheelTable=BABYLON.MeshBuilder.CreateCylinder("wheelTable",{diameter:12,height:0.5,tessellation:50});wheelTable.position.y=7;const boxTable=BABYLON.MeshBuilder.CreateBox("box",{height:0.5,width:10,depth:10});boxTable.position.y=7;var matTable=new BABYLON.StandardMaterial("matTable",scene);matTable.diffuseTexture=new BABYLON.Texture("textures/marble.jpg",scene);wheelTable.material=matTable;boxTable.material=matinviz;let tableShape=1;let advancedTexture=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI",true,scene);let loadedGUI=await advancedTexture.parseFromURLAsync("assets/guiTexture.json");let image01=advancedTexture.getControlByName("Image01");let image02=advancedTexture.getControlByName("Image02");let image03=advancedTexture.getControlByName("Image03");let image04=advancedTexture.getControlByName("Image04");let image05=advancedTexture.getControlByName("Image05");let image11=advancedTexture.getControlByName("Image11");let image22=advancedTexture.getControlByName("Image22");let image33=advancedTexture.getControlByName("Image33");let matPicker=advancedTexture.getControlByName("ColorPicker");image01.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image01.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image02.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image02.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image03.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image03.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image04.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image04.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image05.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image05.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image11.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image11.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image22.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image22.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image33.onPointerOutObservable.add(()=>{document.body.style.cursor=''});image33.onPointerEnterObservable.add(()=>{document.body.style.cursor='pointer'});image01.onPointerUpObservable.add(function(){document.body.style.cursor='';matTable.diffuseTexture=new BABYLON.Texture("textures/gilt.jpg",scene);});image02.onPointerUpObservable.add(function(){matTable.diffuseTexture=new BABYLON.Texture("textures/marble.jpg",scene);});image03.onPointerUpObservable.add(function(){matTable.diffuseTexture=new BABYLON.Texture("textures/larka.jpg",scene);});image04.onPointerUpObservable.add(function(){matTable.diffuseTexture=new BABYLON.Texture("textures/gold.jpg",scene);});image05.onPointerUpObservable.add(function(){matTable.diffuseTexture=new BABYLON.Texture("textures/arctic.jpg",scene);});image11.onPointerUpObservable.add(function(){wheelTable.material=matinviz;boxTable.material=matinviz;});image22.onPointerUpObservable.add(function(){wheelTable.material=matTable;boxTable.material=matinviz;});image33.onPointerUpObservable.add(function(){wheelTable.material=matinviz;boxTable.material=matTable;});matPicker.onValueChangedObservable.add(function(value){shirtMaterial.diffuseColor=value;});var firstPersonScene=new BABYLON.Scene(engine);firstPersonScene.autoClear=false
var cameraEx=new BABYLON.ArcRotateCamera("CameraEx",-Math.PI/2,7*Math.PI/16,10,BABYLON.Vector3.Zero(),firstPersonScene);var lightEx=new BABYLON.HemisphericLight("hemi",new BABYLON.Vector3(0,1,0),firstPersonScene);var shirtMaterialEx=new BABYLON.StandardMaterial("shirtMatEx",firstPersonScene);shirtMaterialEx.diffuseColor=new BABYLON.Color3(1,0,1);var shirtMaterialBlack=new BABYLON.StandardMaterial("shirtMatBlack",firstPersonScene);shirtMaterialBlack.diffuseColor=new BABYLON.Color3(0,0,0);tableEx=[];tablesName.forEach(function(item,index){tableEx[index]=BABYLON.SceneLoader.ImportMeshAsync("","models/",`${item}.glb`,firstPersonScene).then((resultEx)=>{tableEx[index]=resultEx.meshes[0];tableEx[index].scaling=new BABYLON.Vector3(1.5,1.5,1.5);tableEx[index].position=new BABYLON.Vector3(-5+index*2,-4,0);firstPersonScene.getMeshByName(harar).material=shirtMaterialEx;;resultEx.meshes[0].getDescendants().forEach((mesh)=>{mesh.actionManager=new BABYLON.ActionManager(firstPersonScene);mesh.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(event){if(index==0){scene.getMeshByName(harar).material=shirtMaterial;scene.getMeshByName(keln).material=matinviz;scene.getMeshByName(lion).material=matinviz;firstPersonScene.getMeshByName(harar).material=shirtMaterialEx;firstPersonScene.getMeshByName(keln).material=shirtMaterialBlack;firstPersonScene.getMeshByName(lion).material=shirtMaterialBlack;}else if(index==1){scene.getMeshByName(keln).material=shirtMaterial;scene.getMeshByName(harar).material=matinviz;scene.getMeshByName(lion).material=matinviz;firstPersonScene.getMeshByName(keln).material=shirtMaterialEx;firstPersonScene.getMeshByName(harar).material=shirtMaterialBlack;firstPersonScene.getMeshByName(lion).material=shirtMaterialBlack;}else if(index==2){scene.getMeshByName(lion).material=shirtMaterial;scene.getMeshByName(keln).material=matinviz;scene.getMeshByName(harar).material=matinviz;firstPersonScene.getMeshByName(lion).material=shirtMaterialEx;firstPersonScene.getMeshByName(keln).material=shirtMaterialBlack;firstPersonScene.getMeshByName(harar).material=shirtMaterialBlack;}}));})});});setTimeout(function(){engine.stopRenderLoop();engine.runRenderLoop(function(){scene.render();firstPersonScene.render();});},500);let counter=0;scene.registerBeforeRender(()=>{counter+=0.005;tablesName.forEach(function(item,index){tableEx[index].rotation=new BABYLON.Vector3(0,counter/2,0)});});engine.runRenderLoop(()=>scene.render());return scene;};window.initFunction=async function(){var asyncEngineCreation=async function(){try{return createDefaultEngine();}catch(e){console.log("Что то пошло не так, попробуйте позже!");return createDefaultEngine();}}
window.engine=await asyncEngineCreation();if(!engine)throw'Проблема с движком!';startRenderLoop(engine,canvas);window.scene=createScene();};initFunction().then(()=>{scene.then(returnedScene=>{sceneToRender=returnedScene;});});window.addEventListener("resize",function(){engine.resize();});</script></body></html>